@{
    ViewData["Title"] = "Analytics - Meeting Of Minutes";
}

<div class="pagetitle">
    <h1>Analytics</h1>
    <nav>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-controller="DashBoard" asp-action="DashBoard">Home</a></li>
            <li class="breadcrumb-item active">Analytics</li>
        </ol>
    </nav>
</div>

<div class="d-flex justify-content-between align-items-center mb-4">
    <p class="text-muted small mb-0">Visual insights based on meeting records.</p>
    <div class="bg-white p-1 rounded-pill shadow-sm d-flex align-items-center">
        <button class="btn btn-sm btn-light rounded-pill px-3 active fw-bold shadow-sm">Month</button>
        <button class="btn btn-sm btn-light rounded-pill px-3 text-muted">Quarter</button>
        <button class="btn btn-sm btn-light rounded-pill px-3 text-muted">Year</button>
    </div>
</div>

<section class="section dashboard">
    <div class="row">

        <div class="col-lg-8">
            <div class="card border-0 shadow-sm" style="border-radius: 20px;">
                <div class="card-body">
                    <h5 class="card-title">Meeting Trends <span>| Past 6 Months</span></h5>
                    <div id="meetingTrendsChart"></div>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card border-0 shadow-sm" style="border-radius: 20px; height: 96%;">
                <div class="card-body">
                    <h5 class="card-title">Completion Rate <span>| This Month</span></h5>
                    <div id="statusChart" class="d-flex justify-content-center align-items-center" style="min-height: 300px;"></div>
                </div>
            </div>
        </div>

        <div class="col-lg-6 mt-4">
            <div class="card border-0 shadow-sm" style="border-radius: 20px;">
                <div class="card-body">
                    <h5 class="card-title">Department Activity <span>| Meetings Held</span></h5>
                    <div id="deptBarChart"></div>
                </div>
            </div>
        </div>

        <div class="col-lg-6 mt-4">
            <div class="card border-0 shadow-sm" style="border-radius: 20px;">
                <div class="card-body">
                    <h5 class="card-title">Meeting Categories <span>| Distribution</span></h5>
                    <div id="categoryRadarChart"></div>
                </div>
            </div>
        </div>

    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", () => {

            // ============================================
            // 1. AREA CHART - Meeting Trends
            // Derived from your charts-apexcharts.html
            // ============================================
            new ApexCharts(document.querySelector("#meetingTrendsChart"), {
                series: [{
                    name: "Meetings",
                    data: [12, 18, 15, 25, 20, 32, 28]
                }, {
                    name: "Cancelled",
                    data: [2, 1, 3, 0, 2, 1, 4]
                }],
                chart: {
                    height: 350,
                    type: 'area',
                    toolbar: { show: false },
                    zoom: { enabled: false }
                },
                dataLabels: { enabled: false },
                stroke: { curve: 'smooth' },
                xaxis: {
                    type: 'category',
                    categories: ["Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "Jan"]
                },
                tooltip: {
                    x: { format: 'dd/MM/yy' },
                },
                colors: ['#4154f1', '#ff771d'], // Blue & Orange
                fill: {
                    type: "gradient",
                    gradient: {
                        shadeIntensity: 1,
                        opacityFrom: 0.3,
                        opacityTo: 0.4,
                        stops: [0, 90, 100]
                    }
                }
            }).render();

            // ============================================
            // 2. DONUT CHART - Status
            // Derived from your charts-apexcharts.html
            // ============================================
            new ApexCharts(document.querySelector("#statusChart"), {
                series: [44, 55, 13],
                chart: {
                    height: 350,
                    type: 'donut',
                    toolbar: { show: false }
                },
                labels: ['Completed', 'Scheduled', 'Rescheduled'],
                colors: ['#2eca6a', '#4154f1', '#ffc107'], // Green, Blue, Yellow
                dataLabels: { enabled: false },
                legend: { position: 'bottom' }
            }).render();

            // ============================================
            // 3. BAR CHART - Department Activity
            // Derived from your charts-apexcharts.html
            // ============================================
            new ApexCharts(document.querySelector("#deptBarChart"), {
                series: [{
                    data: [24, 18, 12, 9, 5]
                }],
                chart: {
                    type: 'bar',
                    height: 350,
                    toolbar: { show: false }
                },
                plotOptions: {
                    bar: {
                        borderRadius: 4,
                        horizontal: true,
                        barHeight: '40%',
                    }
                },
                dataLabels: { enabled: false },
                xaxis: {
                    categories: ['IT Dept', 'Management', 'HR', 'Finance', 'Operations'],
                },
                colors: ['#798eb3']
            }).render();

            // ============================================
            // 4. RADAR CHART - Categories
            // Derived from your charts-apexcharts.html
            // ============================================
            new ApexCharts(document.querySelector("#categoryRadarChart"), {
                series: [{
                    name: 'Avg Duration (Mins)',
                    data: [60, 45, 30, 90, 20, 40],
                }],
                chart: {
                    height: 350,
                    type: 'radar',
                    toolbar: { show: false }
                },
                xaxis: {
                    categories: ['Board Meeting', 'Scrum', 'Review', 'Training', 'Client Call', 'Audit']
                },
                colors: ['#e91e63'], // Pinkish
                fill: { opacity: 0.2 }
            }).render();

        });
    </script>
}