@{
    ViewData["Title"] = "Departments - Meeting Of Minutes";
}

<!-- PAGE TITLE -->
<div class="pagetitle mb-4">
    <h1>Departments</h1>
    <nav>
        <ol class="breadcrumb flex-nowrap">
            <li class="breadcrumb-item">
                <a asp-controller="DashBoard" asp-action="DashBoard">Home</a>
            </li>
            <li class="breadcrumb-item active">Departments</li>
        </ol>
    </nav>
</div>

<!-- PAGE HEADING + ADD BUTTON -->
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h5 class="fw-bold mb-1">Departments</h5>
        <p class="text-muted mb-0">
            Manage organizational departments and their staff members
        </p>
    </div>

    <a asp-action="DepartmentAddEdit"
       class="btn btn-primary rounded-pill px-4"
       style="background:#6a5ae0;border:none;">
        <i class="bi bi-plus-circle me-1"></i> Add Department
    </a>
</div>

<!-- DEPARTMENTS LIST CARD -->
<div class="card border-0 shadow-sm" style="border-radius:16px;">

    <!-- CARD HEADER WITH SEARCH -->
    <div class="card-header text-white d-flex justify-content-between align-items-center"
         style="background:linear-gradient(90deg,#6a5ae0,#7f6ae6);
                border-radius:16px 16px 0 0;">

        <div class="fw-semibold">
            <i class="bi bi-building me-2"></i> Departments List
        </div>

        <!-- SEARCH (Meeting Type style) -->

        <div style="width: 260px; height: 34px; background: #ffffff; border-radius: 999px; display: flex; align-items: center; padding: 0 14px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
            <i class="bi bi-search" style="color: #6c757d; font-size: 14px;"></i>

            <input type="text"
                   id="deptSearch"
                   placeholder="Search department..."
                   style="border: none; outline: none; width: 100%; margin-left: 8px; font-size: 13px; background: transparent; color: #111827;" />
        </div>
    </div>

    <!-- TABLE -->
    <div class="card-body p-0">
        <table class="table align-middle mb-0">
            <thead class="bg-light small text-uppercase text-muted">
                <tr>
                    <th style="width:60px;">#</th>
                    <th>Department Name</th>
                    <th>Staff Count</th>
                    <th>Meetings</th>
                    <th>Created</th>
                    <th>Modified</th>
                    <th class="text-center">Actions</th>
                </tr>
            </thead>

            <tbody id="deptTable">
                <tr>
                    <td>7</td>
                    <td class="dept-name fw-semibold">Customer Service</td>
                    <td><span class="badge bg-info">3</span></td>
                    <td><span class="badge bg-warning text-dark">2</span></td>
                    <td>2025-11-20</td>
                    <td>2025-11-20</td>
                    <td class="text-center">
                        <a asp-action="DepartmentView"
                           asp-route-id="7"
                           class="text-primary me-2"
                           title="View">
                            <i class="bi bi-eye"></i>
                        </a>

                        <a asp-action="DepartmentAddEdit"
                           asp-route-id="7"
                           class="text-warning me-2"
                           title="Edit">
                            <i class="bi bi-pencil"></i>
                        </a>

                        <a href="#"
                           class="text-danger"
                           title="Delete">
                            <i class="bi bi-trash"></i>
                        </a>
                    </td>
                </tr>

                <tr>
                    <td>3</td>
                    <td class="dept-name fw-semibold">Finance</td>
                    <td><span class="badge bg-info">3</span></td>
                    <td><span class="badge bg-warning text-dark">2</span></td>
                    <td>2025-11-20</td>
                    <td>2025-11-20</td>
                    <td class="text-center">
                        <a asp-action="DepartmentView"
                           asp-route-id="3"
                           class="text-primary me-2">
                            <i class="bi bi-eye"></i>
                        </a>

                        <a asp-action="DepartmentAddEdit"
                           asp-route-id="3"
                           class="text-warning me-2">
                            <i class="bi bi-pencil"></i>
                        </a>

                        <a href="#" class="text-danger">
                            <i class="bi bi-trash"></i>
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <script>
        // SIMPLE SEARCH (easy to understand)
        document.getElementById("deptSearch").onkeyup = function () {
            var value = this.value.toLowerCase();
            var rows = document.querySelectorAll("#deptTable tr");

            for (var i = 0; i < rows.length; i++) {
                var nameCell = rows[i].querySelector(".dept-name");
                if (!nameCell) continue;

                var name = nameCell.innerText.toLowerCase();
                rows[i].style.display = name.indexOf(value) > -1 ? "" : "none";
            }
        };
    </script>
}
